# Go MongoDB Bulk vs Single Upsert

## Usage

### 通常実行

```zsh
make run
```

### ベンチマーク測定

```zsh
make benchmark
```

## 実行結果

### グラフ

![BulkWriteの使用有無による速度比較](https://github.com/taako-502/go-mongodb-bulk-vs-single-upsert/assets/36348377/a58bd7a9-9929-48c0-baa3-dcc1c37302d2)

### 生データ

| Count   | Upsert [ms]  | Upsert with Ordered BulkWrite [ms] | Upsert with Unordered BulkWrite [ms] |
|---------|--------------|-------------------------------------|--------------------------------------|
| 2       | 2.000416     | 0.931167                            | 0.952292                             |
| 10      | 3.062833     | 0.805167                            | 0.7465                               |
| 100     | 27.229875    | 1.646041                            | 1.634                                |
| 1000    | 250.395334   | 10.210208                           | 10.804041                            |
| 10000   | 2484.506208  | 118.735292                          | 110.918834                           |
| 100000  | 25108.59067  | 1041.1585                           | 1042.330291                          |
| 1000000 | 253792.3025  | 10600.63358                         | 10319.62708                          |

